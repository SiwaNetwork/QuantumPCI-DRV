# Quantum-PCI Monitoring System

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –≤–µ–±-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ Quantum-PCI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ptp_ocp –¥—Ä–∞–π–≤–µ—Ä–∞. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤ –¥—Ä–∞–π–≤–µ—Ä–µ.

## ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫
- **PTP –º–µ—Ç—Ä–∏–∫–∏**: offset (–Ω—Å), drift (ppb) –∏–∑ sysfs
- **GNSS —Å—Ç–∞—Ç—É—Å**: –±–∞–∑–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (SYNC/LOST)
- **SMA –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã**: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–∑—ä–µ–º–æ–≤ 1-4
- **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ**: —Å–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä, –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏**: BNO055 (–∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä, –≥–∏—Ä–æ—Å–∫–æ–ø), INA219 (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∏—Ç–∞–Ω–∏—è)
- **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

### üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- **üìâ –ö—Ä–∞—Å–∏–≤—ã–π –¥–∞—à–±–æ—Ä–¥** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏
- **üîß REST API** - –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **üîå WebSocket** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### ‚ö†Ô∏è –°–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏ –¥–ª—è PTP offset/drift
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ç—Ä–µ–Ω–¥—ã

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.8+
- PCI —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ Quantum-PCI
- –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä ptp_ocp
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ /sys/class/timecard/

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
cd quantum-pci-monitoring

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3 -m venv monitoring-env

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
source monitoring-env/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
python3 quantum-pci-monitor.py
```

### –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞:

- **üè† –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: http://localhost:8080/ (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∞—à–±–æ—Ä–¥)
- **üéØ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∞—à–±–æ—Ä–¥**: http://localhost:8080/realistic-dashboard
- **üîß API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:8080/api/
- **üó∫Ô∏è Roadmap**: http://localhost:8080/api/roadmap
- **üîå WebSocket**: ws://localhost:8080/ws

## üì° API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints
- `GET /api/devices` - —Å–ø–∏—Å–æ–∫ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- `GET /api/device/<id>/status` - —Å—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `GET /api/metrics/real` - —Ä–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- `GET /api/alerts` - –∞–∫—Ç–∏–≤–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã
- `GET /api/roadmap` - –¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏
- `GET /api/bno055` - –¥–∞–Ω–Ω—ã–µ BNO055 (–∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä, –≥–∏—Ä–æ—Å–∫–æ–ø)
- `GET /api/ina219` - –¥–∞–Ω–Ω—ã–µ INA219 (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∏—Ç–∞–Ω–∏—è)
- `GET /api/bmp280` - –¥–∞–Ω–Ω—ã–µ BMP280 (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –¥–∞–≤–ª–µ–Ω–∏–µ)
- `GET /api/ptp-network` - PTP —Å–µ—Ç–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
curl http://localhost:8080/api/devices

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ocp0
curl http://localhost:8080/api/device/ocp0/status

# –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:8080/api/metrics/real

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã
curl http://localhost:8080/api/alerts

# –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ BNO055
curl http://localhost:8080/api/bno055

# –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ INA219
curl http://localhost:8080/api/ina219

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Ä–æ–∂–Ω—É—é –∫–∞—Ä—Ç—É
curl http://localhost:8080/api/roadmap
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
export MONITORING_PORT=8080
export MONITORING_HOST=0.0.0.0
export LOG_LEVEL=INFO
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
–ü–æ—Ä–æ–≥–∏ –∞–ª–µ—Ä—Ç–æ–≤ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `api/quantum-pci-realistic-api.py`:

```python
'alerts': {
    'ptp': {
        'offset_ns': {'warning': 1000, 'critical': 10000},
        'drift_ppb': {'warning': 100, 'critical': 1000},
    }
}
```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

### –ó–∞–ø—É—Å–∫
```bash
cd quantum-pci-monitoring
source monitoring-env/bin/activate
python3 quantum-pci-monitor.py &
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
pkill -f quantum-pci-monitor
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
pkill -f quantum-pci-monitor
cd quantum-pci-monitoring
source monitoring-env/bin/activate
python3 quantum-pci-monitor.py &
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
quantum-pci-monitoring/
‚îú‚îÄ‚îÄ api/                           # API –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ quantum-pci-realistic-api.py  # –û—Å–Ω–æ–≤–Ω–æ–π API –º–æ–¥—É–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ realistic-dashboard.html      # –ö—Ä–∞—Å–∏–≤—ã–π –¥–∞—à–±–æ—Ä–¥
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.html               # –û–±—ã—á–Ω—ã–π –¥–∞—à–±–æ—Ä–¥
‚îÇ   ‚îî‚îÄ‚îÄ prometheus-exporter.py       # Prometheus —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä
‚îú‚îÄ‚îÄ web/                           # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–µ–±-—Ä–µ—Å—É—Ä—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ dashboard.html             # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ monitoring-env/                # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python
‚îú‚îÄ‚îÄ quantum-pci-monitor.py         # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ test_monitor.py               # –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ requirements.txt              # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ README.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   source monitoring-env/bin/activate
   pip install -r requirements.txt
   ```

2. **Quantum-PCI –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä–∞–π–≤–µ—Ä
   lsmod | grep ptp_ocp
   ls /sys/class/timecard/
   ```

3. **API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
   ps aux | grep quantum-pci-monitor
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç
   netstat -tlnp | grep 8080
   ```

4. **–î–∞—à–±–æ—Ä–¥ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
   curl http://localhost:8080/
   # –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   firefox http://localhost:8080/
   ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
ps aux | grep quantum-pci-monitor

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API
curl -s http://localhost:8080/api/devices | python3 -m json.tool

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
curl -s http://localhost:8080/api/metrics/real | python3 -m json.tool
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫

### PTP –º–µ—Ç—Ä–∏–∫–∏
- **offset_ns**: –°–º–µ—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥–∞—Ö
- **drift_ppb**: –î—Ä–µ–π—Ñ —á–∞—Å—Ç–æ—Ç—ã –≤ —á–∞—Å—Ç—è—Ö –Ω–∞ –º–∏–ª–ª–∏–∞—Ä–¥
- **clock_source**: –ò—Å—Ç–æ—á–Ω–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ (PPS, PTP, IRIG, etc.)

### GNSS —Å—Ç–∞—Ç—É—Å
- **sync_status**: –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (SYNC/LOST)
- **available**: –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å GNSS –º–æ–¥—É–ª—è

### SMA –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **sma1-4**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–∑—ä–µ–º–æ–≤ (IN/OUT, —Ç–∏–ø —Å–∏–≥–Ω–∞–ª–∞)
- **available_inputs**: –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø—ã –≤—Ö–æ–¥–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- **available_outputs**: –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø—ã –≤—ã—Ö–æ–¥–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
- –ù–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —á—Ç–µ–Ω–∏—é sysfs –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç root –ø—Ä–∞–≤ –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π –ø—Ä–æ–µ–∫—Ç–∞ Quantum-PCI.