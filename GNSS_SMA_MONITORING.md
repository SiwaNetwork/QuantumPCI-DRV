# –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ GNSS –∏ SMA —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–ª—è TimeCard

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ GNSS –∏ SMA —Å—Ç–∞—Ç—É—Å–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è TimeCard —á–µ—Ä–µ–∑ LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã. –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:

- **GNSS —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é** (SYNC/LOST)
- **–†–µ–∂–∏–º holdover** (–∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)
- **–°—Ç–∞—Ç—É—Å SMA –≤—ã—Ö–æ–¥–æ–≤** (–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å —Å–∏–≥–Ω–∞–ª–æ–≤)
- **–ò—Å—Ç–æ—á–Ω–∏–∫ —á–∞—Å–æ–≤** (GNSS/MAC/IRIG-B/PPS)

## –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ LED

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞:
- **üü¢ –ó–µ–ª–µ–Ω—ã–π** (`0xFF`): –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞, —Å–∏–≥–Ω–∞–ª—ã –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã
- **üî¥ –ö—Ä–∞—Å–Ω—ã–π** (`0xFF`): –û—à–∏–±–∫–∞, —Å–∏–≥–Ω–∞–ª—ã –Ω–µ–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã
- **üü£ –°–∏—Ä–µ–Ω–µ–≤—ã–π** (`0x80`): –†–µ–∂–∏–º holdover (–∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)
- **üü° –ñ–µ–ª—Ç—ã–π** (`0xC0`): –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ LED:
- **LED 0 (Power)**: –°—Ç–∞—Ç—É—Å GNSS —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **LED 1 (Sync)**: –†–µ–∂–∏–º holdover
- **LED 2 (GNSS)**: –°—Ç–∞—Ç—É—Å SMA3
- **LED 3 (Alarm)**: –°—Ç–∞—Ç—É—Å SMA4
- **LED 4 (Status1)**: –ò—Å—Ç–æ—á–Ω–∏–∫ —á–∞—Å–æ–≤
- **LED 5 (Status2)**: –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

## –õ–æ–≥–∏–∫–∞ –∏–Ω–¥–∏–∫–∞—Ü–∏–∏

### GNSS Sync LED (Power LED):
- **–ó–µ–ª–µ–Ω—ã–π**: `gnss_sync = "SYNC"`
- **–ö—Ä–∞—Å–Ω—ã–π**: `gnss_sync = "LOST"`
- **–ñ–µ–ª—Ç—ã–π**: –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### Holdover LED (Sync LED):
- **–°–∏—Ä–µ–Ω–µ–≤—ã–π**: –†–µ–∂–∏–º holdover (`clock_source` –≤ `["MAC", "IRIG-B", "external"]`)
- **–í—ã–∫–ª—é—á–µ–Ω**: –î—Ä—É–≥–∏–µ —Ä–µ–∂–∏–º—ã

### SMA Status LEDs:
- **–ó–µ–ª–µ–Ω—ã–π**: SMA —Å–∏–≥–Ω–∞–ª –¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω (—Å–æ–¥–µ—Ä–∂–∏—Ç "PHC" –∏–ª–∏ "10Mhz")
- **–ö—Ä–∞—Å–Ω—ã–π**: SMA —Å–∏–≥–Ω–∞–ª –Ω–µ–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω

### Clock Source LED (Status1):
- **–ó–µ–ª–µ–Ω—ã–π**: `clock_source = "GNSS"`
- **–°–∏—Ä–µ–Ω–µ–≤—ã–π**: `clock_source` –≤ `["MAC", "IRIG-B"]`
- **–ñ–µ–ª—Ç—ã–π**: –î—Ä—É–≥–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### System Status LED (Status2):
- **–ó–µ–ª–µ–Ω—ã–π**: –í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- **–ö—Ä–∞—Å–Ω—ã–π**: GNSS LOST
- **–°–∏—Ä–µ–Ω–µ–≤—ã–π**: –†–µ–∂–∏–º holdover
- **–ñ–µ–ª—Ç—ã–π**: –ü—Ä–æ–±–ª–µ–º—ã —Å SMA —Å–∏–≥–Ω–∞–ª–∞–º–∏

## –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã

### Python —Å–∫—Ä–∏–ø—Ç: `gnss_sma_monitor.py`
–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:

```bash
python3 gnss_sma_monitor.py
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º
- –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ –≤ JSON
- –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### Bash —Å–∫—Ä–∏–ø—Ç: `test_gnss_sma_status.sh`
–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —Å—Ç–∞—Ç—É—Å–æ–≤:

```bash
./test_gnss_sma_status.sh
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
- –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ Ctrl+C –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤

### GNSS —Å—Ç–∞—Ç—É—Å—ã:
```bash
# –ß—Ç–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
cat /sys/class/timecard/ocp0/gnss_sync

# –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
# - "SYNC" - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
# - "LOST" - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Ç–µ—Ä—è–Ω–∞
```

### Clock Source —Å—Ç–∞—Ç—É—Å—ã:
```bash
# –ß—Ç–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —á–∞—Å–æ–≤
cat /sys/class/timecard/ocp0/clock_source

# –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
# - "GNSS" - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å GNSS
# - "MAC" - –∞—Ç–æ–º–Ω—ã–µ —á–∞—Å—ã
# - "IRIG-B" - —Å–∏–≥–Ω–∞–ª IRIG-B
# - "PPS" - PPS —Å–∏–≥–Ω–∞–ª
# - "external" - –≤–Ω–µ—à–Ω–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫
```

### SMA —Å—Ç–∞—Ç—É—Å—ã:
```bash
# –ß—Ç–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ SMA –≤—ã—Ö–æ–¥–æ–≤
cat /sys/class/timecard/ocp0/sma3
cat /sys/class/timecard/ocp0/sma4

# –ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π:
# - "OUT: 10Mhz" - –≤—ã—Ö–æ–¥ 10 –ú–ì—Ü (–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω)
# - "OUT: PHC" - –≤—ã—Ö–æ–¥ PHC (–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω)
# - "OUT: GEN1" - –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
```

## –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫

–°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª `gnss_sma_metrics.json` —Å —Ç–µ–∫—É—â–∏–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏:

```json
{
  "timestamp": "2025-07-30T15:42:26.106880",
  "device": "TimeCard GNSS/SMA Monitor",
  "gnss": {
    "sync": "SYNC",
    "clock_source": "PPS",
    "mode": "sync",
    "color": "green"
  },
  "sma": {
    "sma3": {
      "type": "output",
      "signal": "OUT: 10Mhz",
      "reliable": true,
      "color": "green"
    },
    "sma4": {
      "type": "output", 
      "signal": "OUT: PHC",
      "reliable": true,
      "color": "green"
    }
  },
  "led_status": {
    "gnss_sync": "green",
    "holdover": "off",
    "sma3": "green",
    "sma4": "green",
    "clock_source": "green",
    "system": "green"
  }
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FPGA

–°–æ–≥–ª–∞—Å–Ω–æ [FPGA –ø—Ä–æ–µ–∫—Ç—É Time-Card](https://github.com/Time-Appliances-Project/Time-Card/tree/master/FPGA/Open-Source), —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:

### I2C LED –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä IS32FL3207:
- **–ê–¥—Ä–µ—Å**: `0x37` –Ω–∞ —à–∏–Ω–µ I2C-1
- **–†–µ–≥–∏—Å—Ç—Ä—ã**: PWM (0x01-0x23), Scaling (0x4A-0x5B), Update (0x49)
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: 18 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö LED –∫–∞–Ω–∞–ª–æ–≤

### Sysfs –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å TimeCard:
- **GNSS —Å—Ç–∞—Ç—É—Å**: `/sys/class/timecard/ocp0/gnss_sync`
- **–ò—Å—Ç–æ—á–Ω–∏–∫ —á–∞—Å–æ–≤**: `/sys/class/timecard/ocp0/clock_source`
- **SMA –≤—ã—Ö–æ–¥—ã**: `/sys/class/timecard/ocp0/sma[1-4]`

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å I2C:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ I2C —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
sudo i2cdetect -y 1

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
ls -la /dev/i2c-1
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å TimeCard:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
ls -la /sys/class/timecard/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –¥—Ä–∞–π–≤–µ—Ä–∞
dmesg | grep ptp_ocp
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å LED:
```bash
# –†—É—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è LED –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
sudo i2cset -y 1 0x37 0x00 0x01
sudo i2cset -y 1 0x37 0x6E 0xFF
sudo i2cset -y 1 0x37 0x49 0x00
```

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### systemd —Å–µ—Ä–≤–∏—Å:
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/gnss-sma-monitor.service`:

```ini
[Unit]
Description=GNSS/SMA Status Monitor
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/home/shiwa-time/QuantumPCI-DRV
ExecStart=/usr/bin/python3 /home/shiwa-time/QuantumPCI-DRV/gnss_sma_monitor.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞:
```bash
sudo systemctl daemon-reload
sudo systemctl enable gnss-sma-monitor
sudo systemctl start gnss-sma-monitor
sudo systemctl status gnss-sma-monitor
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ Prometheus/Grafana

–°–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Å—Ç–µ–∫–æ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ Prometheus:
```yaml
# prometheus.yml
scrape_configs:
  - job_name: 'timecard-gnss-sma'
    static_configs:
      - targets: ['localhost:8000']
    metrics_path: '/metrics/gnss-sma'
```

### –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫:
```python
# –î–æ–±–∞–≤–∏—Ç—å –≤ gnss_sma_monitor.py
def export_prometheus_metrics(self):
    metrics = self.export_metrics()
    
    prometheus_metrics = f"""
# HELP timecard_gnss_sync_status GNSS synchronization status
# TYPE timecard_gnss_sync_status gauge
timecard_gnss_sync_status{{status="{metrics['gnss']['sync']}"}} 1

# HELP timecard_sma_reliability SMA signal reliability
# TYPE timecard_sma_reliability gauge
timecard_sma_reliability{{sma="sma3",reliable="{metrics['sma']['sma3']['reliable']}"}} 1
timecard_sma_reliability{{sma="sma4",reliable="{metrics['sma']['sma4']['reliable']}"}} 1
"""
    
    with open('/tmp/gnss_sma_metrics.prom', 'w') as f:
        f.write(prometheus_metrics)
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ GNSS –∏ SMA —Å—Ç–∞—Ç—É—Å–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

1. **–í–∏–∑—É–∞–ª—å–Ω—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é** —Å–æ—Å—Ç–æ—è–Ω–∏—è TimeCard —á–µ—Ä–µ–∑ LED
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã
3. **–≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
4. **–ü—Ä–æ—Å—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ bash –∏ Python —Å–∫—Ä–∏–ø—Ç—ã
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å FPGA** Time-Card –ø—Ä–æ–µ–∫—Ç–∞

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. 

## –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

#### 1. –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ GNSS —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (SYNC/LOST)
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∂–∏–º–∞ holdover (–∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏ SMA —Å–∏–≥–Ω–∞–ª–æ–≤ (SMA3/SMA4)
- ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ LED

#### 2. –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

##### Python —Å–∫—Ä–∏–ø—Ç: `gnss_sma_monitor.py`
- **–§—É–Ω–∫—Ü–∏–∏**: –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —ç–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **LED –∏–Ω–¥–∏–∫–∞—Ü–∏—è**: 6 LED –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤
- **–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞**: –ó–µ–ª–µ–Ω—ã–π/–ö—Ä–∞—Å–Ω—ã–π/–°–∏—Ä–µ–Ω–µ–≤—ã–π/–ñ–µ–ª—Ç—ã–π
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª**: 5 —Å–µ–∫—É–Ω–¥ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

##### Bash —Å–∫—Ä–∏–ø—Ç: `test_gnss_sma_status.sh`
- **–§—É–Ω–∫—Ü–∏–∏**: –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —Å—Ç–∞—Ç—É—Å–æ–≤, —Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –õ–µ–≥–∫–∏–π –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ Ctrl+C

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –¢–µ—Å—Ç–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- ‚úÖ **GNSS Status**: SYNC (–∑–µ–ª–µ–Ω—ã–π LED)
- ‚úÖ **Clock Source**: PPS (–∂–µ–ª—Ç—ã–π LED)
- ‚úÖ **SMA3**: OUT: 10Mhz (–∑–µ–ª–µ–Ω—ã–π LED)
- ‚úÖ **SMA4**: OUT: PHC (–∑–µ–ª–µ–Ω—ã–π LED)
- ‚úÖ **System Status**: –í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç (–∑–µ–ª–µ–Ω—ã–π LED)

#### –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫:
```json
{
    "gnss_sync": 1,
    "holdover": 0,
    "clock_source": "PPS",
    "sma3_valid": 1,
    "sma4_valid": 1,
    "sma3_config": "OUT: 10Mhz",
    "sma4_config": "OUT: PHC",
    "led_states": {
        "power": "green",
        "sync": "off",
        "gnss": "green",
        "alarm": "green",
        "status1": "yellow",
        "status2": "green"
    }
}
```

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å:
- ‚úÖ Prometheus (—á–µ—Ä–µ–∑ gnss_sma_metrics.json)
- ‚úÖ Grafana (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫)
- ‚úÖ –°–∏—Å—Ç–µ–º—ã –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞
- ‚úÖ CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ã

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤–∫–ª—é—á–∞—é—â–∞—è:
- –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã
- –¶–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É LED
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ 