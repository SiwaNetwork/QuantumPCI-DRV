# –û—Ç—á–µ—Ç –æ –ø–æ–ø—ã—Ç–∫–µ –ø—Ä–æ—à–∏–≤–∫–∏ Factory_TimeCard.bin

## üìã –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–§–∞–π–ª:** `./QuantumPCI-Firmware-Tool/Factory_TimeCard.bin`
**–†–∞–∑–º–µ—Ä:** 7,081,820 –±–∞–π—Ç (‚âà 6.75 MB)
**–¢–∏–ø:** –°—ã—Ä–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ FPGA –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ ptp_ocp

## üîç –ê–Ω–∞–ª–∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

### –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–∞–π–ª–∞:
```
00000000  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
00000010  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|
00000020  00 00 00 bb 11 22 00 44  ff ff ff ff ff ff ff ff  |.....".D........|
```

### –í—ã–≤–æ–¥—ã:
- –§–∞–π–ª –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `ff ff ff ff` - —Ç–∏–ø–∏—á–Ω–æ –¥–ª—è FPGA –ø—Ä–æ—à–∏–≤–æ–∫
- –ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –±–∞–π—Ç–æ–≤ "OCPC" –∏–ª–∏ "SHIW"
- –≠—Ç–æ "—Å—ã—Ä–∞—è" –ø—Ä–æ—à–∏–≤–∫–∞ –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ ptp_ocp

## üõ†Ô∏è –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏ Quantum Platforms (SHIW)

```bash
sudo ./convert_firmware.sh quantum ./QuantumPCI-Firmware-Tool/Factory_TimeCard.bin Factory_TimeCard_quantum.bin
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –§–∞–π–ª —Å–æ–∑–¥–∞–Ω: `Factory_TimeCard_quantum.bin`
- ‚úÖ –†–∞–∑–º–µ—Ä: 7,081,835 –±–∞–π—Ç (+15 –±–∞–π—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞)
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫: `53 48 49 57` (SHIW)

### 2. –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–æ—à–∏–≤–∫–∏ Quantum Platforms –≤–µ—Ä—Å–∏–∏

```bash
sudo ./convert_firmware.sh flash Factory_TimeCard_quantum.bin "Quantum Platforms"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå –û—à–∏–±–∫–∞: "No firmware header found, cancel firmware upgrade"
- ‚ùå –ü—Ä–∏—á–∏–Ω–∞: –î—Ä–∞–π–≤–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ "SHIW"

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏ Meta Platforms (OCPC)

```bash
sudo ./convert_firmware.sh meta ./QuantumPCI-Firmware-Tool/Factory_TimeCard.bin Factory_TimeCard_meta.bin
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –§–∞–π–ª —Å–æ–∑–¥–∞–Ω: `Factory_TimeCard_meta.bin`
- ‚úÖ –†–∞–∑–º–µ—Ä: 7,081,835 –±–∞–π—Ç (+15 –±–∞–π—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞)
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫: `4f 43 50 43` (OCPC)

### 4. –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–æ—à–∏–≤–∫–∏ Meta Platforms –≤–µ—Ä—Å–∏–∏

```bash
sudo ./convert_firmware.sh flash Factory_TimeCard_meta.bin "Meta Platforms"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå –û—à–∏–±–∫–∞: "Firmware image compatibility check failed"
- ‚ùå –ü—Ä–∏—á–∏–Ω–∞: –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Ä–∞–∑–º–µ—Ä–∞ –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É–º–µ–Ω—å—à–µ–Ω–Ω–æ–π –ø—Ä–æ—à–∏–≤–∫–æ–π

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ 1MB –≤–µ—Ä—Å–∏–∏
dd if=./QuantumPCI-Firmware-Tool/Factory_TimeCard.bin bs=1M count=1 > test_firmware_1MB.bin

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–π —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
sudo ./convert_firmware.sh quantum test_firmware_1MB.bin test_quantum_1MB.bin
sudo ./convert_firmware.sh meta test_firmware_1MB.bin test_meta_1MB.bin
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå Quantum –≤–µ—Ä—Å–∏—è: "No firmware header found"
- ‚ùå Meta –≤–µ—Ä—Å–∏—è: "Firmware image compatibility check failed"

## üîß –ü—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö –ø—Ä–∏—á–∏–Ω—ã

### 1. –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ "SHIW"
- **–ü—Ä–æ–±–ª–µ–º–∞:** –î—Ä–∞–π–≤–µ—Ä –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –º–∞–≥–∏—á–µ—Å–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ "SHIW"
- **–†–µ—à–µ–Ω–∏–µ:** –¢—Ä–µ–±—É–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Quantum Platforms

### 2. –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ—à–∏–≤–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–º–µ—Ä 7MB –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MTD —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ

### 3. –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞:** Vendor ID, Device ID –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º
- **–¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  - Vendor ID: 0x1d9b ‚úÖ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É)
  - Device ID: 0x0400 ‚úÖ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É)
  - HW Revision: 0x0001 ‚ùì (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º)

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:
```bash
lspci -nn | grep "01:00.0"
# 01:00.0 Memory controller [0580]: Meta Platforms, Inc. Device [1d9b:0400]
```

### –¢–µ–∫—É—â–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:
```bash
sudo dd if=/dev/mtd0 bs=1 count=16 | hexdump -C
# 00000000  11 00 00 9c 90 02 00 d6  00 00 00 05 ff ff ff ff  |................|
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞
```c
// –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∑–∞–≥–æ–ª–æ–≤–∫–∞ SHIW –≤ ptp_ocp.c
#define QUANTUM_FIRMWARE_MAGIC_HEADER "SHIW"

// –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∑–∞–≥–æ–ª–æ–≤–∫–∞
if (memcmp(hdr->magic, OCP_FIRMWARE_MAGIC_HEADER, 4) && 
    memcmp(hdr->magic, QUANTUM_FIRMWARE_MAGIC_HEADER, 4)) {
    // –û—à–∏–±–∫–∞: –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
}
```

### 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ—à–∏–≤–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä MTD —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞

### 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–µ–≤–∏–∑–∏–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ä–µ–≤–∏–∑–∏—é —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä HW Revision –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ

### 4. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—à–∏–≤–∫—É –º–µ–Ω—å—à–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
- –†–∞–∑–¥–µ–ª–∏—Ç—å –ø—Ä–æ—à–∏–≤–∫—É –Ω–∞ —á–∞—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ –ø—Ä–æ—à–∏–≤–∫–∏

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `Factory_TimeCard_quantum.bin` - –≤–µ—Ä—Å–∏—è —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º SHIW
2. `Factory_TimeCard_meta.bin` - –≤–µ—Ä—Å–∏—è —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º OCPC
3. `test_firmware_1MB.bin` - —Ç–µ—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è 1MB
4. `test_quantum_1MB.bin` - —Ç–µ—Å—Ç–æ–≤–∞—è Quantum –≤–µ—Ä—Å–∏—è 1MB
5. `test_meta_1MB.bin` - —Ç–µ—Å—Ç–æ–≤–∞—è Meta –≤–µ—Ä—Å–∏—è 1MB

## ‚úÖ –í—ã–≤–æ–¥—ã

1. **–§–∞–π–ª Factory_TimeCard.bin —É—Å–ø–µ—à–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω** –≤ –≤–µ—Ä—Å–∏–∏ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
2. **–ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å–æ–∑–¥–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** (SHIW –∏ OCPC)
3. **–î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞**
4. **–†–∞–∑–º–µ—Ä –ø—Ä–æ—à–∏–≤–∫–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π** –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
5. **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ SHIW
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ—à–∏–≤–∫–∏
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏
4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
