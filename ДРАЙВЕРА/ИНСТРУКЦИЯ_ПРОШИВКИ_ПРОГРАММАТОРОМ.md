# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–æ—à–∏–≤–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä–æ–º

## üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä—ã

### MTD —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —Å–∏—Å—Ç–µ–º–µ:
```bash
/dev/mtd0      # BIOS
/dev/mtd1      # spi512.0 (–æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ—à–∏–≤–∫–∞)
/dev/mtd0ro    # BIOS (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
/dev/mtd1ro    # spi512.0 (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
```

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ—à–∏–≤–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ —Å—ã—Ä–æ–≥–æ —Ñ–∞–π–ª–∞ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```bash
# –ü—Ä–æ—à–∏–≤–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –Ω–∞–ø—Ä—è–º—É—é
sudo dd if=./QuantumPCI-Firmware-Tool/Factory_TimeCard.bin of=/dev/mtd1 bs=1M

# –ò–ª–∏ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
sudo dd if=./QuantumPCI-Firmware-Tool/Factory_TimeCard.bin of=/dev/mtd1 bs=1M status=progress
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ - –Ω–∏–∫–∞–∫–∏—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π –Ω–µ –Ω—É–∂–Ω–æ
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å - —ç—Ç–æ "—Ä–æ–¥–Ω–∞—è" –ø—Ä–æ—à–∏–≤–∫–∞ FPGA
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å - –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ –ë—ã—Å—Ç—Ä–æ—Ç–∞ - –ø—Ä—è–º–∞—è –∑–∞–ø–∏—Å—å –≤ MTD

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ—à–∏–≤–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º

```bash
# –ü—Ä–æ—à–∏–≤–∫–∞ –≤–µ—Ä—Å–∏–∏ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º Quantum Platforms
sudo dd if=Factory_TimeCard_quantum.bin of=/dev/mtd1 bs=1M status=progress

# –ü—Ä–æ—à–∏–≤–∫–∞ –≤–µ—Ä—Å–∏–∏ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º Meta Platforms
sudo dd if=Factory_TimeCard_meta.bin of=/dev/mtd1 bs=1M status=progress
```

## üõ†Ô∏è –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø—Ä–æ—à–∏–≤–∫–∏

```bash
# –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–π –ø—Ä–æ—à–∏–≤–∫–∏
sudo dd if=/dev/mtd1 of=backup_firmware_$(date +%Y%m%d_%H%M%S).bin bs=1M

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
ls -la backup_firmware_*.bin
```

### –®–∞–≥ 2: –í—ã–±–æ—Ä —Ñ–∞–π–ª–∞ –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏

```bash
# –í–∞—Ä–∏–∞–Ω—Ç A: –°—ã—Ä–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
FIRMWARE_FILE="./QuantumPCI-Firmware-Tool/Factory_TimeCard.bin"

# –í–∞—Ä–∏–∞–Ω—Ç B: –° –∑–∞–≥–æ–ª–æ–≤–∫–æ–º Quantum Platforms
FIRMWARE_FILE="Factory_TimeCard_quantum.bin"

# –í–∞—Ä–∏–∞–Ω—Ç C: –° –∑–∞–≥–æ–ª–æ–≤–∫–æ–º Meta Platforms
FIRMWARE_FILE="Factory_TimeCard_meta.bin"
```

### –®–∞–≥ 3: –ü—Ä–æ—à–∏–≤–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
ls -la "$FIRMWARE_FILE"

# –ü—Ä–æ—à–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
sudo dd if="$FIRMWARE_FILE" of=/dev/mtd1 bs=1M status=progress

# –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
sync
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ—à–∏–≤–∫–∏
sudo dd if=/dev/mtd1 bs=1 count=16 2>/dev/null | hexdump -C

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä–∞–π–≤–µ—Ä
sudo modprobe -r ptp_ocp
sudo modprobe ptp_ocp

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
lspci | grep "01:00.0"
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é** –ø–µ—Ä–µ–¥ –ø—Ä–æ—à–∏–≤–∫–æ–π
- **–ù–µ –ø—Ä–µ—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å** –ø—Ä–æ—à–∏–≤–∫–∏
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ò–ë–ü** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è

### 2. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **–°—ã—Ä–∞—è –ø—Ä–æ—à–∏–≤–∫–∞** - —Å–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
- **–ü—Ä–æ—à–∏–≤–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º** –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å, –µ—Å–ª–∏ –¥—Ä–∞–π–≤–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
- **–†–∞–∑–º–µ—Ä –ø—Ä–æ—à–∏–≤–∫–∏** –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—É MTD —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
# –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
sudo dd if=backup_firmware_YYYYMMDD_HHMMSS.bin of=/dev/mtd1 bs=1M
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ MTD —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ MTD —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö:
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ MTD —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
cat /proc/mtd

# –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
sudo mtd_debug info /dev/mtd1
```

### –†–∞–∑–º–µ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤:
```bash
# –†–∞–∑–º–µ—Ä MTD —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
ls -la /dev/mtd1

# –ò–ª–∏ —á–µ—Ä–µ–∑ sysfs
cat /sys/class/mtd/mtd1/size
```

## üìã –ü–æ–ª–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ—à–∏–≤–∫–∏

```bash
#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä–æ–º

set -e

FIRMWARE_FILE="./QuantumPCI-Firmware-Tool/Factory_TimeCard.bin"
BACKUP_FILE="backup_firmware_$(date +%Y%m%d_%H%M%S).bin"
MTD_DEVICE="/dev/mtd1"

echo "=== –ü—Ä–æ—à–∏–≤–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä–æ–º ==="

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞
if [ ! -f "$FIRMWARE_FILE" ]; then
    echo "–û—à–∏–±–∫–∞: –§–∞–π–ª $FIRMWARE_FILE –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
echo "–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏..."
sudo dd if="$MTD_DEVICE" of="$BACKUP_FILE" bs=1M status=progress

# –ü—Ä–æ—à–∏–≤–∫–∞
echo "–ü—Ä–æ—à–∏–≤–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞..."
sudo dd if="$FIRMWARE_FILE" of="$MTD_DEVICE" bs=1M status=progress

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
echo "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è..."
sync

# –ü—Ä–æ–≤–µ—Ä–∫–∞
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞..."
sudo dd if="$MTD_DEVICE" bs=1 count=16 2>/dev/null | hexdump -C

echo "–ü—Ä–æ—à–∏–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—ã—Ä—É—é –ø—Ä–æ—à–∏–≤–∫—É** `Factory_TimeCard.bin`
2. **–°–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é** –ø–µ—Ä–µ–¥ –ø—Ä–æ—à–∏–≤–∫–æ–π
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä—ã** —Ñ–∞–π–ª–∞ –∏ MTD —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ò–ë–ü** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–µ—Ä—Å–∏—é —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º** –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ—à–∏–≤–∫–∏ —Å—ã—Ä–æ–π –≤–µ—Ä—Å–∏–∏
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å –¥—Ä–∞–π–≤–µ—Ä–æ–º
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ "No space left on device"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä MTD —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
cat /sys/class/mtd/mtd1/size

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ø—Ä–æ—à–∏–≤–∫–∏
ls -la "$FIRMWARE_FILE"
```

### –û—à–∏–±–∫–∞ "Permission denied"
```bash
# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å sudo
sudo dd if="$FIRMWARE_FILE" of="$MTD_DEVICE" bs=1M
```

### –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
sudo dd if="$BACKUP_FILE" of="$MTD_DEVICE" bs=1M

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
sudo reboot
```
