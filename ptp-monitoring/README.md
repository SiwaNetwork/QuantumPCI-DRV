# рџ•ђ Quantum-PCI TimeCard PTP OCP Advanced Monitoring System v2.0

РџРѕР»РЅРѕС„СѓРЅРєС†РёРѕРЅР°Р»СЊРЅР°СЏ СЃРёСЃС‚РµРјР° РјРѕРЅРёС‚РѕСЂРёРЅРіР° РґР»СЏ Quantum-PCI TimeCard PTP OCP СѓСЃС‚СЂРѕР№СЃС‚РІ СЃ РїРѕРґРґРµСЂР¶РєРѕР№ РІСЃРµС… Р°РїРїР°СЂР°С‚РЅС‹С… РѕСЃРѕР±РµРЅРЅРѕСЃС‚РµР№.

> рџ“Њ **Р‘С‹СЃС‚СЂС‹Р№ СЃС‚Р°СЂС‚**: РЎРј. [QUICKSTART.md](QUICKSTART.md)  
> рџ“Њ **РџРѕР»РЅР°СЏ РёРЅСЃС‚СЂСѓРєС†РёСЏ**: РЎРј. [TIMECARD_РРќРЎРўР РЈРљР¦РРЇ_РћРџРўРРњРР—РР РћР’РђРќРќРђРЇ.md](../TIMECARD_РРќРЎРўР РЈРљР¦РРЇ_РћРџРўРРњРР—РР РћР’РђРќРќРђРЇ.md)  
> рџ“Њ **Monitoring Stack (Docker/Grafana)**: РЎРј. [../docs/tools/monitoring-guide.md](../docs/tools/monitoring-guide.md)

## вњЁ Р’РѕР·РјРѕР¶РЅРѕСЃС‚Рё СЃРёСЃС‚РµРјС‹ РјРѕРЅРёС‚РѕСЂРёРЅРіР°

### рџ”Ґ Р Р°СЃС€РёСЂРµРЅРЅС‹Р№ РјРѕРЅРёС‚РѕСЂРёРЅРі Quantum-PCI TimeCard

#### рџЊЎпёЏ Thermal Monitoring
- **6 С‚РµРјРїРµСЂР°С‚СѓСЂРЅС‹С… СЃРµРЅСЃРѕСЂРѕРІ**: FPGA, РѕСЃС†РёР»Р»СЏС‚РѕСЂ, РїР»Р°С‚Р°, ambient, PLL, DDR
- **РђРІС‚РѕРјР°С‚РёС‡РµСЃРєРѕРµ СѓРїСЂР°РІР»РµРЅРёРµ РѕС…Р»Р°Р¶РґРµРЅРёРµРј**: РљРѕРЅС‚СЂРѕР»СЊ СЃРєРѕСЂРѕСЃС‚Рё РІРµРЅС‚РёР»СЏС‚РѕСЂР°
- **РўРµРїР»РѕРІРѕРµ СЂРµРіСѓР»РёСЂРѕРІР°РЅРёРµ**: РџСЂРµРґРѕС‚РІСЂР°С‰РµРЅРёРµ РїРµСЂРµРіСЂРµРІР° СЃ Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРёРј throttling
- **РќР°СЃС‚СЂР°РёРІР°РµРјС‹Рµ РїРѕСЂРѕРіРё**: РџСЂРµРґСѓРїСЂРµР¶РґРµРЅРёСЏ Рё РєСЂРёС‚РёС‡РµСЃРєРёРµ Р·РЅР°С‡РµРЅРёСЏ

#### вљЎ Power Monitoring
- **4 voltage rails**: 3.3V, 1.8V, 1.2V, 12V РјРѕРЅРёС‚РѕСЂРёРЅРі
- **РђРЅР°Р»РёР· РїРѕС‚СЂРµР±Р»РµРЅРёСЏ С‚РѕРєР°**: РџРѕ РєРѕРјРїРѕРЅРµРЅС‚Р°Рј (FPGA, OSC, DDR, PHY)
- **Р­С„С„РµРєС‚РёРІРЅРѕСЃС‚СЊ РїРёС‚Р°РЅРёСЏ**: Р Р°СЃС‡РµС‚ РљРџР” Рё С‚РµРїР»РѕРІС‹РґРµР»РµРЅРёСЏ
- **РљРѕРЅС‚СЂРѕР»СЊ СЃС‚Р°Р±РёР»СЊРЅРѕСЃС‚Рё**: РћС‚РєР»РѕРЅРµРЅРёСЏ РЅР°РїСЂСЏР¶РµРЅРёР№ РѕС‚ РЅРѕРјРёРЅР°Р»Р°

#### рџ›°пёЏ GNSS Advanced Tracking
- **4 СЃРѕР·РІРµР·РґРёСЏ**: GPS, GLONASS, Galileo, BeiDou
- **Р”РµС‚Р°Р»СЊРЅР°СЏ СЃС‚Р°С‚РёСЃС‚РёРєР°**: Р’РёРґРёРјС‹Рµ/РёСЃРїРѕР»СЊР·СѓРµРјС‹Рµ СЃРїСѓС‚РЅРёРєРё РїРѕ СЃРёСЃС‚РµРјР°Рј
- **РљР°С‡РµСЃС‚РІРѕ СЃРёРіРЅР°Р»Р°**: PDOP, HDOP, VDOP, C/N0 Р°РЅР°Р»РёР·
- **Antenna monitoring**: РЎРѕСЃС‚РѕСЏРЅРёРµ Р°РЅС‚РµРЅРЅС‹, РїРёС‚Р°РЅРёРµ, РєРѕСЂРѕС‚РєРёРµ Р·Р°РјС‹РєР°РЅРёСЏ
- **Survey-in РїСЂРѕС†РµСЃСЃ**: РљРѕРЅС‚СЂРѕР»СЊ РєР°Р»РёР±СЂРѕРІРєРё РїРѕР»РѕР¶РµРЅРёСЏ
- **РџРѕРјРµС…РѕР·Р°С‰РёС‰РµРЅРЅРѕСЃС‚СЊ**: РћР±РЅР°СЂСѓР¶РµРЅРёРµ jamming Рё spoofing

#### вљЎ Oscillator Disciplining
- **Allan deviation Р°РЅР°Р»РёР·**: РЎС‚Р°Р±РёР»СЊРЅРѕСЃС‚СЊ С‡Р°СЃС‚РѕС‚С‹ РЅР° СЂР°Р·РЅС‹С… РёРЅС‚РµСЂРІР°Р»Р°С…
- **PI controller РјРѕРЅРёС‚РѕСЂРёРЅРі**: РџСЂРѕРїРѕСЂС†РёРѕРЅР°Р»СЊРЅС‹Р№ Рё РёРЅС‚РµРіСЂР°Р»СЊРЅС‹Р№ С‚РµСЂРјС‹
- **Holdover performance**: РљР°С‡РµСЃС‚РІРѕ СѓРґРµСЂР¶Р°РЅРёСЏ РїСЂРё РїРѕС‚РµСЂРµ РѕРїРѕСЂРЅРѕРіРѕ СЃРёРіРЅР°Р»Р°
- **Frequency error tracking**: РћС‚СЃР»РµР¶РёРІР°РЅРёРµ РґСЂРµР№С„Р° С‡Р°СЃС‚РѕС‚С‹ РІ ppb
- **Lock duration**: Р’СЂРµРјСЏ РЅР°С…РѕР¶РґРµРЅРёСЏ РІ СЃРёРЅС…СЂРѕРЅРёР·РјРµ

#### рџ“Ў Advanced PTP Metrics
- **Path delay Р°РЅР°Р»РёР·**: Р’Р°СЂРёР°С†РёРё, РјРёРЅРёРјСѓРј, РјР°РєСЃРёРјСѓРј, Р°СЃРёРјРјРµС‚СЂРёСЏ
- **Packet statistics**: РЎС‚Р°С‚РёСЃС‚РёРєР° РїРѕ РІСЃРµРј С‚РёРїР°Рј PTP РїР°РєРµС‚РѕРІ
- **Master clock tracking**: РСЃС‚РѕСЂРёСЏ СЃРјРµРЅС‹ РјР°СЃС‚РµСЂ-С‡Р°СЃРѕРІ
- **Performance scoring**: РћР±С‰Р°СЏ РѕС†РµРЅРєР° РєР°С‡РµСЃС‚РІР° PTP СЃРёРЅС…СЂРѕРЅРёР·Р°С†РёРё
- **UTC/TAI РёРЅС„РѕСЂРјР°С†РёСЏ**: Leap seconds Рё СЃРјРµС‰РµРЅРёСЏ РІСЂРµРјРµРЅРё

#### рџ”§ Hardware Status Monitoring
- **LED РёРЅРґРёРєР°С‚РѕСЂС‹**: Power, Sync, GNSS, Alarm СЃРѕСЃС‚РѕСЏРЅРёСЏ
- **SMA connectors**: РЎС‚Р°С‚СѓСЃ PPS Рё REF РІС…РѕРґРѕРІ/РІС‹С…РѕРґРѕРІ
- **FPGA РёРЅС„РѕСЂРјР°С†РёСЏ**: Р’РµСЂСЃРёСЏ, С‚РµРјРїРµСЂР°С‚СѓСЂР°, СѓС‚РёР»РёР·Р°С†РёСЏ СЂРµСЃСѓСЂСЃРѕРІ
- **Network PHY**: РЎРѕСЃС‚РѕСЏРЅРёРµ РїРѕСЂС‚РѕРІ, СЃРєРѕСЂРѕСЃС‚СЊ, РґСѓРїР»РµРєСЃ
- **Calibration data**: Р—Р°РґРµСЂР¶РєРё РєР°Р±РµР»РµР№, СЃРјРµС‰РµРЅРёСЏ timestamp

#### рџљЁ Intelligent Alerting System
- **РќР°СЃС‚СЂР°РёРІР°РµРјС‹Рµ РїРѕСЂРѕРіРё**: Р”Р»СЏ РІСЃРµС… С‚РёРїРѕРІ РјРµС‚СЂРёРє
- **РњРЅРѕРіРѕСѓСЂРѕРІРЅРµРІС‹Рµ Р°Р»РµСЂС‚С‹**: Warning, Critical, Info
- **РСЃС‚РѕСЂРёСЏ Р°Р»РµСЂС‚РѕРІ**: РЎРѕС…СЂР°РЅРµРЅРёРµ Рё Р°РЅР°Р»РёР· СЃРѕР±С‹С‚РёР№
- **Real-time СѓРІРµРґРѕРјР»РµРЅРёСЏ**: WebSocket live updates

#### рџ“Љ Health Scoring & Analytics
- **Comprehensive scoring**: РћР±С‰Р°СЏ РѕС†РµРЅРєР° Р·РґРѕСЂРѕРІСЊСЏ СЃРёСЃС‚РµРјС‹
- **Component-level Р°РЅР°Р»РёР·**: РћС‚РґРµР»СЊРЅС‹Рµ РѕС†РµРЅРєРё РґР»СЏ РєР°Р¶РґРѕР№ РїРѕРґСЃРёСЃС‚РµРјС‹
- **Trend analysis**: РђРЅР°Р»РёР· С‚СЂРµРЅРґРѕРІ Рё РґРµРіСЂР°РґР°С†РёРё
- **Historical data**: РЎРѕС…СЂР°РЅРµРЅРёРµ РјРµС‚СЂРёРє РґР»СЏ РґРѕР»РіРѕСЃСЂРѕС‡РЅРѕРіРѕ Р°РЅР°Р»РёР·Р°

## рџ“Ѓ РЎС‚СЂСѓРєС‚СѓСЂР° РїСЂРѕРµРєС‚Р°

```
ptp-monitoring/
в”њв”Ђв”Ђ api/
в”‚   в”њв”Ђв”Ђ app.py                    # РћСЃРЅРѕРІРЅРѕРµ РїСЂРёР»РѕР¶РµРЅРёРµ (auto-detection)
в”‚   в”њв”Ђв”Ђ timecard-api.py           # Р‘Р°Р·РѕРІС‹Р№ API (v1.0)
в”‚   в””в”Ђв”Ђ timecard-extended-api.py  # Р Р°СЃС€РёСЂРµРЅРЅС‹Р№ API (v2.0)
в”њв”Ђв”Ђ dashboards/
в”‚   в”њв”Ђв”Ђ timecard-dashboard.html   # Р Р°СЃС€РёСЂРµРЅРЅС‹Р№ dashboard
в”‚   в””в”Ђв”Ђ timecard-dashboard-v1.html # Р‘Р°Р·РѕРІС‹Р№ dashboard
в”њв”Ђв”Ђ pwa/
в”‚   в””в”Ђв”Ђ index.html               # Mobile PWA РїСЂРёР»РѕР¶РµРЅРёРµ
в”њв”Ђв”Ђ scripts/
в”‚   в”њв”Ђв”Ђ start-monitoring-stack.sh # РЈРїСЂР°РІР»РµРЅРёРµ Docker stack
в”‚   в””в”Ђв”Ђ prometheus-exporter.py   # Prometheus СЌРєСЃРїРѕСЂС‚РµСЂ
в”њв”Ђв”Ђ config/
в”‚   в”њв”Ђв”Ђ prometheus.yml           # РљРѕРЅС„РёРіСѓСЂР°С†РёСЏ Prometheus
в”‚   в”њв”Ђв”Ђ alertmanager.yml         # РљРѕРЅС„РёРіСѓСЂР°С†РёСЏ AlertManager
в”‚   в””в”Ђв”Ђ grafana-dashboard.json   # Dashboard РґР»СЏ Grafana
в”њв”Ђв”Ђ demo.py                      # Р‘Р°Р·РѕРІР°СЏ РґРµРјРѕРЅСЃС‚СЂР°С†РёСЏ
в”њв”Ђв”Ђ demo-extended.py             # Р Р°СЃС€РёСЂРµРЅРЅР°СЏ РґРµРјРѕРЅСЃС‚СЂР°С†РёСЏ
в””в”Ђв”Ђ requirements.txt             # Python Р·Р°РІРёСЃРёРјРѕСЃС‚Рё
```

## рџ”§ РљРѕРЅС„РёРіСѓСЂР°С†РёСЏ

### РџРµСЂРµРјРµРЅРЅС‹Рµ РѕРєСЂСѓР¶РµРЅРёСЏ

```bash
# API РїРѕСЂС‚ (РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ 8080)
export TIMECARD_API_PORT=8080

# РРЅС‚РµСЂРІР°Р»С‹ РѕР±РЅРѕРІР»РµРЅРёСЏ (РјСЃ)
export UPDATE_INTERVAL=5000
export QUICK_UPDATE_INTERVAL=2000

# РЈСЂРѕРІРµРЅСЊ Р»РѕРіРёСЂРѕРІР°РЅРёСЏ
export LOG_LEVEL=INFO
```

### РќР°СЃС‚СЂРѕР№РєР° РїРѕСЂРѕРіРѕРІ Р°Р»РµСЂС‚РѕРІ

Р РµРґР°РєС‚РёСЂСѓР№С‚Рµ `api/timecard-extended-api.py`:

```python
alert_thresholds = {
    'thermal': {
        'fpga_temp': {'warning': 70, 'critical': 85},
        'osc_temp': {'warning': 60, 'critical': 75}
    },
    'ptp': {
        'offset_ns': {'warning': 1000, 'critical': 10000}
    }
}
```

## рџђі Docker Support

```bash
# Build РѕР±СЂР°Р·
docker build -t timecard-monitoring .

# Р—Р°РїСѓСЃРє РєРѕРЅС‚РµР№РЅРµСЂР°
docker run -d -p 8080:8080 --privileged \
  -v /sys:/sys:ro \
  --name timecard-monitor \
  timecard-monitoring
```

## рџ“љ API Documentation

РџРѕР»РЅР°СЏ РґРѕРєСѓРјРµРЅС‚Р°С†РёСЏ API РґРѕСЃС‚СѓРїРЅР° РїРѕ Р°РґСЂРµСЃСѓ:
- http://localhost:8080/api/

РћСЃРЅРѕРІРЅС‹Рµ endpoints:
- `/api/metrics/extended` - Р’СЃРµ СЂР°СЃС€РёСЂРµРЅРЅС‹Рµ РјРµС‚СЂРёРєРё
- `/api/devices` - РЎРїРёСЃРѕРє СѓСЃС‚СЂРѕР№СЃС‚РІ
- `/api/alerts` - РђРєС‚РёРІРЅС‹Рµ Р°Р»РµСЂС‚С‹
- `/api/health` - РЎРѕСЃС‚РѕСЏРЅРёРµ СЃРёСЃС‚РµРјС‹

## рџ› пёЏ Р Р°Р·СЂР°Р±РѕС‚РєР°

### РўСЂРµР±РѕРІР°РЅРёСЏ
- Python 3.7+
- Linux kernel 5.12+
- Quantum-PCI TimeCard РґСЂР°Р№РІРµСЂ Р·Р°РіСЂСѓР¶РµРЅ

### РўРµСЃС‚РёСЂРѕРІР°РЅРёРµ
```bash
# Unit С‚РµСЃС‚С‹
python -m pytest tests/

# РРЅС‚РµРіСЂР°С†РёРѕРЅРЅС‹Рµ С‚РµСЃС‚С‹
python tests/integration_test.py
```

### Р’РєР»Р°Рґ РІ РїСЂРѕРµРєС‚
1. Fork СЂРµРїРѕР·РёС‚РѕСЂРёСЏ
2. РЎРѕР·РґР°Р№С‚Рµ feature branch
3. Commit РёР·РјРµРЅРµРЅРёСЏ
4. Push РІ branch
5. РЎРѕР·РґР°Р№С‚Рµ Pull Request

## рџ“„ Р›РёС†РµРЅР·РёСЏ

Р­С‚РѕС‚ РїСЂРѕРµРєС‚ Р»РёС†РµРЅР·РёСЂРѕРІР°РЅ РїРѕРґ MIT License.

---

**Quantum-PCI TimeCard PTP OCP Advanced Monitoring System v2.0**  
*Professional-grade monitoring for precision timing applications*
