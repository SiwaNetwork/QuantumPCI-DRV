# üïê TimeCard PTP OCP Advanced Monitoring System v2.0

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è TimeCard PTP OCP —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π.

> üìå **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**: –°–º. [QUICKSTART.md](QUICKSTART.md)  
> üìå **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: –°–º. [TIMECARD_–ò–ù–°–¢–†–£–ö–¶–ò–Ø_–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø.md](../TIMECARD_–ò–ù–°–¢–†–£–ö–¶–ò–Ø_–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø.md)  
> üìå **Monitoring Stack (Docker/Grafana)**: –°–º. [MONITORING-STACK.md](MONITORING-STACK.md)

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### üî• –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ TimeCard

#### üå°Ô∏è Thermal Monitoring
- **6 —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤**: FPGA, –æ—Å—Ü–∏–ª–ª—è—Ç–æ—Ä, –ø–ª–∞—Ç–∞, ambient, PLL, DDR
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ–º**: –ö–æ–Ω—Ç—Ä–æ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∞
- **–¢–µ–ø–ª–æ–≤–æ–µ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–≥—Ä–µ–≤–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º throttling
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è

#### ‚ö° Power Monitoring
- **4 voltage rails**: 3.3V, 1.8V, 1.2V, 12V –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–ê–Ω–∞–ª–∏–∑ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ç–æ–∫–∞**: –ü–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º (FPGA, OSC, DDR, PHY)
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–∏—Ç–∞–Ω–∏—è**: –†–∞—Å—á–µ—Ç –ö–ü–î –∏ —Ç–µ–ø–ª–æ–≤—ã–¥–µ–ª–µ–Ω–∏—è
- **–ö–æ–Ω—Ç—Ä–æ–ª—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏**: –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –æ—Ç –Ω–æ–º–∏–Ω–∞–ª–∞

#### üõ∞Ô∏è GNSS Advanced Tracking
- **4 —Å–æ–∑–≤–µ–∑–¥–∏—è**: GPS, GLONASS, Galileo, BeiDou
- **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –í–∏–¥–∏–º—ã–µ/–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–ø—É—Ç–Ω–∏–∫–∏ –ø–æ —Å–∏—Å—Ç–µ–º–∞–º
- **–ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–∞**: PDOP, HDOP, VDOP, C/N0 –∞–Ω–∞–ª–∏–∑
- **Antenna monitoring**: –°–æ—Å—Ç–æ—è–Ω–∏–µ –∞–Ω—Ç–µ–Ω–Ω—ã, –ø–∏—Ç–∞–Ω–∏–µ, –∫–æ—Ä–æ—Ç–∫–∏–µ –∑–∞–º—ã–∫–∞–Ω–∏—è
- **Survey-in –ø—Ä–æ—Ü–µ—Å—Å**: –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –ø–æ–ª–æ–∂–µ–Ω–∏—è
- **–ü–æ–º–µ—Ö–æ–∑–∞—â–∏—â–µ–Ω–Ω–æ—Å—Ç—å**: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ jamming –∏ spoofing

#### ‚ö° Oscillator Disciplining
- **Allan deviation –∞–Ω–∞–ª–∏–∑**: –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —á–∞—Å—Ç–æ—Ç—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞—Ö
- **PI controller –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ü—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π —Ç–µ—Ä–º—ã
- **Holdover performance**: –ö–∞—á–µ—Å—Ç–≤–æ —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ –æ–ø–æ—Ä–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞
- **Frequency error tracking**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥—Ä–µ–π—Ñ–∞ —á–∞—Å—Ç–æ—Ç—ã –≤ ppb
- **Lock duration**: –í—Ä–µ–º—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–º–µ

#### üì° Advanced PTP Metrics
- **Path delay –∞–Ω–∞–ª–∏–∑**: –í–∞—Ä–∏–∞—Ü–∏–∏, –º–∏–Ω–∏–º—É–º, –º–∞–∫—Å–∏–º—É–º, –∞—Å–∏–º–º–µ—Ç—Ä–∏—è
- **Packet statistics**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º —Ç–∏–ø–∞–º PTP –ø–∞–∫–µ—Ç–æ–≤
- **Master clock tracking**: –ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω—ã –º–∞—Å—Ç–µ—Ä-—á–∞—Å–æ–≤
- **Performance scoring**: –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ PTP —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **UTC/TAI –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: Leap seconds –∏ —Å–º–µ—â–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏

#### üîß Hardware Status Monitoring
- **LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã**: Power, Sync, GNSS, Alarm —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **SMA connectors**: –°—Ç–∞—Ç—É—Å PPS –∏ REF –≤—Ö–æ–¥–æ–≤/–≤—ã—Ö–æ–¥–æ–≤
- **FPGA –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: –í–µ—Ä—Å–∏—è, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, —É—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- **Network PHY**: –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤, —Å–∫–æ—Ä–æ—Å—Ç—å, –¥—É–ø–ª–µ–∫—Å
- **Calibration data**: –ó–∞–¥–µ—Ä–∂–∫–∏ –∫–∞–±–µ–ª–µ–π, —Å–º–µ—â–µ–Ω–∏—è timestamp

#### üö® Intelligent Alerting System
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏**: –î–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –º–µ—Ç—Ä–∏–∫
- **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∞–ª–µ—Ä—Ç—ã**: Warning, Critical, Info
- **–ò—Å—Ç–æ—Ä–∏—è –∞–ª–µ—Ä—Ç–æ–≤**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ —Å–æ–±—ã—Ç–∏–π
- **Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: WebSocket live updates

#### üìä Health Scoring & Analytics
- **Comprehensive scoring**: –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
- **Component-level –∞–Ω–∞–ª–∏–∑**: –û—Ç–¥–µ–ª—å–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã
- **Trend analysis**: –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ –∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏
- **Historical data**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ptp-monitoring/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ app.py                    # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (auto-detection)
‚îÇ   ‚îú‚îÄ‚îÄ timecard-api.py           # –ë–∞–∑–æ–≤—ã–π API (v1.0)
‚îÇ   ‚îî‚îÄ‚îÄ timecard-extended-api.py  # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π API (v2.0)
‚îú‚îÄ‚îÄ web/
‚îÇ   ‚îú‚îÄ‚îÄ timecard-dashboard.html   # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π dashboard
‚îÇ   ‚îî‚îÄ‚îÄ timecard-dashboard-v1.html # –ë–∞–∑–æ–≤—ã–π dashboard
‚îú‚îÄ‚îÄ pwa/
‚îÇ   ‚îî‚îÄ‚îÄ index.html               # Mobile PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ start-monitoring-stack.sh # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker stack
‚îÇ   ‚îî‚îÄ‚îÄ prometheus-exporter.py   # Prometheus —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ prometheus.yml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
‚îÇ   ‚îú‚îÄ‚îÄ alertmanager.yml         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AlertManager
‚îÇ   ‚îî‚îÄ‚îÄ grafana-dashboard.json   # Dashboard –¥–ª—è Grafana
‚îú‚îÄ‚îÄ demo.py                      # –ë–∞–∑–æ–≤–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ demo-extended.py             # –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ requirements.txt             # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# API –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8080)
export TIMECARD_API_PORT=8080

# –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–º—Å)
export UPDATE_INTERVAL=5000
export QUICK_UPDATE_INTERVAL=2000

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
export LOG_LEVEL=INFO
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤ –∞–ª–µ—Ä—Ç–æ–≤

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `api/timecard-extended-api.py`:

```python
alert_thresholds = {
    'thermal': {
        'fpga_temp': {'warning': 70, 'critical': 85},
        'osc_temp': {'warning': 60, 'critical': 75}
    },
    'ptp': {
        'offset_ns': {'warning': 1000, 'critical': 10000}
    }
}
```

## üê≥ Docker Support

```bash
# Build –æ–±—Ä–∞–∑
docker build -t timecard-monitoring .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d -p 8080:8080 --privileged \
  -v /sys:/sys:ro \
  --name timecard-monitor \
  timecard-monitoring
```

## üìö API Documentation

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
- http://localhost:8080/api/

–û—Å–Ω–æ–≤–Ω—ã–µ endpoints:
- `/api/metrics/extended` - –í—Å–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- `/api/devices` - –°–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- `/api/alerts` - –ê–∫—Ç–∏–≤–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã
- `/api/health` - –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.7+
- Linux kernel 5.12+
- TimeCard –¥—Ä–∞–π–≤–µ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# Unit —Ç–µ—Å—Ç—ã
python -m pytest tests/

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
python tests/integration_test.py
```

### –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç
1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. Push –≤ branch
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License.

---

**TimeCard PTP OCP Advanced Monitoring System v2.0**  
*Professional-grade monitoring for precision timing applications*