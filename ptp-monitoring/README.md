# Quantum-PCI Real Monitoring System

## Обзор

Система веб-мониторинга для устройств Quantum-PCI с поддержкой PTP OCP драйвера. Предоставляет мониторинг реальных данных с устройства, метрик синхронизации и системы алертов.

## Возможности

### Веб-интерфейсы
- **📉 Основной дашборд** - мониторинг реальных данных с устройства (адаптивный)
- **🔧 REST API** - программный интерфейс
- **🔌 WebSocket** - обновления в реальном времени

### Мониторинг метрик
- **PTP метрики**: смещение, задержка, частота
- **GNSS статус**: синхронизация, спутники, фикс
- **SMA коннекторы**: конфигурация, статус
- **Системные параметры**: температура, питание

### Система алертов
- Настраиваемые пороги
- Уведомления в реальном времени
- Исторические данные

## Быстрый старт

### Требования
- Python 3.8+
- PCI устройство Quantum-PCI
- Загруженный драйвер ptp_ocp

### Запуск

```bash
# Установка зависимостей
pip install -r requirements.txt

# Запуск системы мониторинга
python3 quantum-pci-monitor.py
```

### Доступ
После запуска система будет доступна:
- **Dashboard**: http://localhost:8080/dashboard (адаптивный веб-интерфейс)
- **API**: http://localhost:8080/api/
- **WebSocket**: ws://localhost:8080/ws

## API Endpoints

### Основные
- `GET /api/devices` - список устройств
- `GET /api/device/<id>/status` - статус устройства
- `GET /api/metrics/extended` - расширенные метрики
- `GET /api/alerts` - активные алерты

### WebSocket
- Real-time обновления метрик
- События алертов
- Статус соединения

## Конфигурация

### Переменные окружения
```bash
export MONITORING_PORT=8080
export MONITORING_HOST=0.0.0.0
export LOG_LEVEL=INFO
```

### Настройка алертов
Алерты настраиваются в коде приложения в разделе alert thresholds.

## Разработка

### Структура проекта
```
ptp-monitoring/
├── api/                    # API и веб-интерфейсы
│   ├── quantum-pci-api.py # Основной API модуль
│   ├── dashboard.html     # Веб-интерфейс
│   └── prometheus-exporter.py # Опциональный Prometheus экспортер
├── web/                   # Дополнительные веб-ресурсы
│   └── dashboard.html     # Альтернативный интерфейс
├── quantum-pci-monitor.py # Главный скрипт запуска
├── requirements.txt       # Зависимости Python
└── README.md             # Документация
```

### Добавление новых метрик
1. Добавить функцию чтения в соответствующий модуль
2. Обновить API endpoints
3. Добавить отображение в шаблоны

## Устранение неполадок

### Распространенные проблемы
1. **Сервер не запускается** - проверить зависимости
2. **Quantum-PCI не обнаруживается** - проверить драйвер
3. **API не отвечает** - проверить логи
4. **Дашборд не загружается** - проверить JavaScript

### Логи
```bash
tail -f monitoring.log
```

## Лицензия

Система мониторинга распространяется под лицензией проекта.
