.TH TESTPTP 1 "2024-01-15" "LinuxPTP" "User Commands"
.SH NAME
testptp \- test PTP hardware clock devices
.SH SYNOPSIS
.B testptp
[\fIOPTIONS\fR] \fB\-d\fR \fIDEVICE\fR
.SH DESCRIPTION
\fBtestptp\fR is a simple test program for PTP hardware clock devices. It can be used to test basic functionality of PTP clocks and to configure periodic output and external timestamping features.

This utility is particularly useful for testing PTP hardware and verifying that the driver is functioning correctly.

.SH OPTIONS
.TP
.BR \-d " " \fIDEVICE\fR
Specify the PTP clock device to test (e.g., /dev/ptp0). This option is required.
.TP
.BR \-c
Show the capabilities of the PTP clock device.
.TP
.BR \-g
Get the current time from the PTP clock.
.TP
.BR \-s
Set the PTP clock time to the current system time.
.TP
.BR \-t " " \fISECONDS\fR
Set the PTP clock time to the specified number of seconds since the Unix epoch.
.TP
.BR \-a " " \fISECONDS\fR
Adjust the PTP clock time by the specified number of seconds.
.TP
.BR \-f " " \fIFREQ\fR
Adjust the PTP clock frequency by the specified amount in parts per billion (ppb).
.TP
.BR \-p " " \fIPERIOD\fR
Configure periodic output with the specified period in nanoseconds.
.TP
.BR \-w " " \fIWIDTH\fR
Set the pulse width for periodic output in nanoseconds.
.TP
.BR \-H " " \fISECONDS\fR
Set the phase offset for periodic output in seconds.
.TP
.BR \-i " " \fIINDEX\fR
Specify the pin index for periodic output or external timestamping.
.TP
.BR \-k
Show kernel information about the PTP clock.
.TP
.BR \-l
List available pins on the PTP clock device.
.TP
.BR \-L
Show the functions assigned to each pin.
.TP
.BR \-n " " \fISAMPLES\fR
Specify the number of samples for offset measurements.
.TP
.BR \-o
Perform a single offset measurement between system time and PTP clock.
.TP
.BR \-v
Enable verbose output.

.SH EXAMPLES
.TP
Show capabilities of PTP device:
.B testptp \-d /dev/ptp0 \-c
.TP
Get current time from PTP clock:
.B testptp \-d /dev/ptp0 \-g
.TP
Set PTP clock to system time:
.B testptp \-d /dev/ptp0 \-s
.TP
Adjust frequency by +100 ppb:
.B testptp \-d /dev/ptp0 \-f 100
.TP
Configure 1 PPS output:
.B testptp \-d /dev/ptp0 \-p 1000000000
.TP
Measure offset 10 times:
.B testptp \-d /dev/ptp0 \-n 10 \-o
.TP
List available pins:
.B testptp \-d /dev/ptp0 \-L

.SH FILES
.TP
.I /dev/ptp*
PTP hardware clock character devices.

.SH SEE ALSO
.BR ptp4l (1),
.BR phc2sys (1),
.BR pmc (1)

.SH AUTHORS
Richard Cochran <richardcochran@gmail.com> and the LinuxPTP development team.

.SH COPYRIGHT
Copyright (C) 2011-2024 Richard Cochran and the LinuxPTP project contributors.
This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.